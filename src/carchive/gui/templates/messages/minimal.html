{% extends 'layout.html' %}

{% block title %}Minimal Test - Messages{% endblock %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h2>Message List Test Page</h2>
        </div>
        <div class="card-body">
          {% if api_error %}
            <div class="alert alert-warning">
              <h4 class="alert-heading">API Error</h4>
              <p>{{ api_error }}</p>
            </div>
          {% endif %}
          
          {% if api_working %}
            <div class="alert alert-success">
              <h4 class="alert-heading">API is Working!</h4>
              <p>API Status: {{ test_data.api_status }}</p>
            </div>
            
            <h3>Search Parameters</h3>
            <ul>
              <li>Query: {{ query or 'None' }}</li>
              <li>Role Filter: {{ role or 'All' }}</li>
              <li>Show Gencom: {{ 'Yes' if show_gencom else 'No' }}</li>
            </ul>
            
            <hr>
            
            <p>Now that we've confirmed API communication works, let's try a more complete implementation:</p>
            <a href="{{ url_for('messages.real_list') }}" class="btn btn-primary">Try Real Message List</a>
          {% else %}
            <div class="alert alert-danger">
              <p>API communication is not working. Please check that the API server is running at the correct URL.</p>
            </div>
          {% endif %}
          
          <div class="mt-3">
            <a href="{{ url_for('main.index') }}" class="btn btn-secondary">Return to Home</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}